{"version":3,"sources":["services/getall.js","App.js","index.js"],"names":["baseurl","getAll","axios","get","then","response","data","Notification","message","setErrorMessage","setTimeout","includes","className","Filter","searchResults","setSearchResults","persons","onChange","event","target","value","filter","person","name","toLowerCase","charAt","length","map","result","key","number","PersonForm","newName","newNumber","setNewNumber","setNewName","setPersons","checkIfExists","newPerson","every","changePhoneNumber","window","confirm","thatPerson","id","put","changePersonNumber","changedperson","catch","error","onSubmit","preventDefault","post","createPerson","returnedPerson","concat","alert","type","PhoneBook","handleClick","delete","console","log","deletePerson","initialPersons","onClick","Footer","style","color","fontStyle","fontSize","App","useState","errorMessage","useEffect","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.047f8898.chunk.js","sourcesContent":["import axios from 'axios'\r\nimport React from 'react'\r\nconst baseurl = '/api/persons'\r\n\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseurl);\r\n    return request.then(response => response.data)\r\n\r\n}\r\n\r\nconst createPerson = (newPerson) => {\r\n    const request = axios.post(baseurl, newPerson)\r\n    return request.then(response => response.data)\r\n    \r\n}\r\nconst deletePerson = (id) => {\r\n    const request = axios.delete(`${baseurl}/${id}`)\r\n    return request.then(response => response.data).catch(error => {\r\n        console.log('fail')\r\n      })\r\n}\r\n\r\nconst changePersonNumber = (id, newPerson) => {\r\n    const request = axios.put(`${baseurl}/${id}`, newPerson)\r\n    return request.then(response => response.data)\r\n\r\n\r\n}\r\n\r\nexport { getAll, createPerson, deletePerson, changePersonNumber }","import React, { useState, useEffect } from 'react';\nimport { getAll, createPerson, deletePerson, changePersonNumber } from './services/getall'\n\nconst Notification = ({ message, setErrorMessage }) => {\n  if (message === null) return null\n  setTimeout(() => {\n    setErrorMessage(null)\n  }, 3000)\n  if (message.includes('Successfully')) {\n    return (\n      <div className=\"success\">\n        {message}\n      </div>\n    )\n  }\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n  \n}\nconst Filter = ({searchResults, setSearchResults, persons}) => {\n  const searchName = (event) => {\n    event.target.value === '' ? setSearchResults([]) : setSearchResults(persons.filter(person => person.name.toLowerCase().charAt(event.target.value.length - 1) === event.target.value.toLowerCase().charAt(event.target.value.length - 1)))\n  }\n  \n  return (\n    <div>\n      <input onChange={searchName}  />\n      {searchResults.map(result => <li key={result.name}>{result.name} {result.number}</li>)}\n    </div>\n  )\n}\nconst PersonForm = ({newName, newNumber, setNewNumber, setNewName, setPersons, persons, setErrorMessage}) => {\n  const addPhone = (event) => {\n      event.preventDefault()\n      const newPerson = {\n        name: newName,\n        number: newNumber\n      }\n      if (newPerson.name.length === 0 || newPerson.number.length === 0) {\n        setErrorMessage('You cannot submit empty form!')\n      } else {\n        if (checkIfExists(newPerson)) {\n          createPerson(newPerson).then(returnedPerson =>\n            setPersons(persons.concat(returnedPerson))).catch( error => {\n              if (error) {\n                alert('Name requires at least 3 chars, phone number requires at least 8 chars!')\n              } else setErrorMessage('Successfully created new person')\n            })\n          \n\n        } else {\n          changePhoneNumber(newPerson)\n        }\n      }\n    setNewName('') // clean\n    setNewNumber('') // clean\n  }\n  const handleNameChange = (event) => setNewName(event.target.value)\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n  const checkIfExists = (newPerson) => {\n    return persons.every(person => person.name !== newPerson.name)\n  }\n  const changePhoneNumber = (newPerson) => {\n    const answer = window.confirm(`Person ${newPerson.name} already exists, do you want to replace old number?`)\n    if (answer) {\n      const thatPerson = persons.filter(person => person.name === newName)\n      changePersonNumber(thatPerson[0].id, newPerson)\n      .then(changedperson =>\n        setPersons(persons.map(person => person.id !== changedperson.id ? person: changedperson)))\n        .catch(error => {\n        setErrorMessage(`${thatPerson[0].name} was already deleted from server`)\n        setPersons(persons.filter(person => person.id !== thatPerson[0].id))\n      })\n      \n    }\n  }\n  \n  return (\n    <form onSubmit={addPhone}>\n      <div>\n          name: <input value={newName} onChange={handleNameChange} />\n        </div>\n        <div>number: <input value={newNumber} onChange={handleNumberChange}/></div>\n        <div>\n          <button type=\"submit\">add</button>\n              \n        </div>\n    </form>\n\n  )\n}\n\nconst PhoneBook = ({persons, setPersons}) => {\n  const handleClick = (id) => {\n    const answer = window.confirm('Do you want to delete that')\n    if (answer) {\n      deletePerson(id)\n      getAll()\n    .then(initialPersons =>\n    {setPersons(initialPersons)})\n    }\n\n  }\n  return(\n    <div>{persons.map(result => <li key={result.name}>{result.name} {result.number} <button onClick={ () => handleClick(result.id)}>Delete</button></li>)}</div>\n  )\n}\n\n\n\nconst Footer = () => {\n  const footerStyle = {\n    color: 'green',\n    fontStyle: 'italic',\n    fontSize: 16\n  } // just like an object we add css but we use '''' \n  return (\n    <div style={footerStyle}>\n      <br />\n      <em>Note app, Department of Computer Science, University of Helsinki 2020</em>\n    </div>\n  )\n}\nfunction App() {\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber] = useState('')\n  const [ searchResults, setSearchResults] = useState([])\n  const [errorMessage, setErrorMessage] = useState(null)\n  \n  useEffect(() => {\n    getAll()\n    .then(initialPersons =>\n    {setPersons(initialPersons)}) /// response.data dan aldigi arrayi setliyo\n  }, [])\n  \n\n\n  \n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={errorMessage} setErrorMessage={setErrorMessage} />\n      <Filter searchResults={searchResults} setSearchResults={setSearchResults} persons={persons}/>\n      <h2>Add a New</h2>\n      <PersonForm newName={newName} newNumber={newNumber} setNewNumber={setNewNumber} setNewName={setNewName} setPersons={setPersons} persons={persons} setErrorMessage={setErrorMessage}/>\n      <h2>Numbers</h2>\n      <PhoneBook persons={persons} setPersons={setPersons} />\n      <Footer />\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}